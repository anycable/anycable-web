<!-- Code is generated by Code to Markup. Go there if you want to update it: https://psd-coder.github.io/code-to-markup/?h=shiki&t=github-dark-high-contrast&l=ruby# -->
<pre class="shiki github-dark-high-contrast" style="background-color:#0a0c10;color:#f0f3f6" tabindex="0"><code style="padding:1em;overflow-x: auto;"><span class="line"><span style="color:#FF9492">class</span><span style="color:#FFB757"> ChatChannel</span><span style="color:#F0F3F6"> &#x3C; </span><span style="color:#91CBFF">ApplicationCable::Channel</span></span>
<span class="line"><span style="color:#FF9492">  def</span><span style="color:#DBB7FF"> speak</span><span style="color:#F0F3F6">(data)</span></span>
<span class="line"><span style="color:#FFB757">    message</span><span style="color:#FF9492"> =</span><span style="color:#F0F3F6"> data.</span><span style="color:#DBB7FF">fetch</span><span style="color:#F0F3F6">(</span><span style="color:#ADDCFF">"message"</span><span style="color:#F0F3F6">)</span></span>
<span class="line"><span style="color:#FFB757">    name</span><span style="color:#FF9492"> =</span><span style="color:#F0F3F6"> user.</span><span style="color:#DBB7FF">name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBB7FF">    broadcast_to</span><span style="color:#F0F3F6">(</span></span>
<span class="line"><span style="color:#F0F3F6">      workspace,</span></span>
<span class="line"><span style="color:#91CBFF">      action:</span><span style="color:#ADDCFF"> "newMessage"</span><span style="color:#F0F3F6">,</span></span>
<span class="line"><span style="color:#91CBFF">      html:</span><span style="color:#DBB7FF"> render</span><span style="color:#F0F3F6">(</span><span style="color:#ADDCFF">"chats/message"</span><span style="color:#F0F3F6">, </span><span style="color:#91CBFF">message:</span><span style="color:#F0F3F6">, </span><span style="color:#91CBFF">name:</span><span style="color:#F0F3F6">),</span></span>
<span class="line"><span style="color:#91CBFF">      author_id:</span><span style="color:#F0F3F6"> user.</span><span style="color:#DBB7FF">id</span></span>
<span class="line"><span style="color:#F0F3F6">    )</span></span>
<span class="line"><span style="color:#FF9492">  end</span></span>
<span class="line"><span style="color:#FF9492">end</span></span></code></pre>
